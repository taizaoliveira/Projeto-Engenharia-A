# H6 - Como usuário cadastrado/visitante, eu gostaria de ver um mapa com a localização de todas as UBSs, para que eu possa encontrar a mais próxima.

### **Critérios de Aceitação:**

- Dado que o usuário acessa a tela de consulta de UBSs, então o sistema deve exibir um mapa interativo utilizando a API do Google Maps, com marcadores (pins) que indicam a localização exata de cada UBS cadastrada.
- Ao carregar a tela, o sistema deve solicitar permissão para acessar a localização do usuário. 
- Se a permissão for concedida, a lista de UBSs abaixo do mapa deve ser ordenada por proximidade, da mais próxima à mais distante.
- Para cada item da lista ordenada por proximidade, a distância aproximada deve ser exibida (ex: "Aprox. 1.2 km").
- Se a permissão de localização for negada pelo usuário ou não estiver disponível, a lista de UBSs deve ser exibida, por padrão, em ordem alfabética.
- Se a permissão de localização for concedida pelo usuário, o mapa deve ser inicializado centralizado na localização atual do usuário, com um nível de zoom apropriado para visualizar a vizinhança (ex: zoom nível 15).
- Se a permissão de localização for negada ou não estiver disponível, o mapa deve ser inicializado centralizado na cidade de Itacoatiara, com um nível de zoom que permita a visualização de todas as UBSs da cidade.
- A interface deve fornecer ao usuário uma opção clara (ex: um menu de seleção) para alternar a ordenação da lista entre "Por Proximidade" (se a localização estiver disponível) e "Ordem Alfabética".
- Para cada item da lista de UBSs, deve haver um botão "VER MAIS".
- Ao clicar no botão "VER MAIS" de uma UBS, um modal deve ser exibido com, no mínimo, as seguintes informações: Nome Oficial, Endereço Completo, Horário de Funcionamento e Principais Serviços.
- Enquanto o modal de uma UBS estiver aberto, o seu marcador (pin) correspondente no mapa deve ser destacado visualmente (ex: mudando de cor ou aumentando de tamanho).
- O mapa deve permitir zoom in e zoom out para facilitar a visualização das localizações.

### **Regras de Negócios** 

- Para cada UBS, é obrigatória a exibição das seguintes informações mínimas para o usuário: Nome Oficial, Endereço Completo, Horário de Funcionamento e Principais Serviços.
- O horário de funcionamento padrão de cada UBS deve ser exibido, com destaque para informações sobre horários especiais ou funcionamento em fins de semana, se aplicável.
- A área de abrangência do serviço de busca e visualização é o município de Itacoatiara. Unidades fora deste limite geográfico não devem ser exibidas.
- A "proximidade" deve ser calculada utilizando a API de roteirização para refletir a distância real de deslocamento pelas vias, e não apenas a distância em linha reta.

### Tabela de Classes de Equivalência

#### Tabela 1 – Inicialização da Tela e Carregamento do Mapa
| Condição de Entrada/Estado                 | Classes Válidas                                     | Classes Inválidas                                     | Classes Inválidas                                       |
| ------------------------------------------ | --------------------------------------------------- | ----------------------------------------------------- | ------------------------------------------------------- |
| Acesso à tela de consulta de UBSs          | (1) Tela de UBSs acessada (usuário ou visitante)    | (2) Tentativa de acesso à tela incorreta              | (3) Falha de navegação ou erro ao carregar a tela       |
| Carregamento do mapa                       | (4) Mapa renderizado via API Google Maps            | (5) Mapa sem interatividade ou com elementos ausentes | (6) Mapa não carregado                                  |
| Interação com o mapa                       | (7) Zoom in/out funcionando corretamente           | (8) Zoom travado ou desproporcional                  | (9) Mapa completamente estático                        |
| Área geográfica das UBSs                   | (10) Apenas UBSs de Itacoatiara são exibidas         | (11) UBSs de outras cidades são exibidas               | (12) Nenhuma UBS carregada, mesmo havendo na cidade      |

#### Tabela 2 – Localização do Usuário e Comportamento Dinâmico
| Condição de Entrada/Estado                 | Classes Válidas                                                  | Classes Inválidas                                         | Classes Inválidas                  |
| ------------------------------------------ | ---------------------------------------------------------------- | --------------------------------------------------------- | ---------------------------------- |
| Permissão de localização                   | (1) Permissão concedida                                          | (2) Permissão negada pelo usuário                         | (3) Permissão indisponível         |
| Centro e zoom do mapa                      | (4) Centralizado na localização do usuário, ex: zoom = 15        | (5) Zoom inadequado (muito próximo ou distante)           | (6) Centro em local incorreto      |
| Ordenação da lista de UBSs                 | (7) Por proximidade (com permissão) ou alfabética (sem permissão)| (8) Ordenação incorreta de acordo com o tipo de permissão | (9) Lista aparece desordenada      |
| Distância exibida para cada UBS            | (10) Exibida com precisão aproximada (ex: “Aprox. 1.2 km”)       | (11) Distância incorreta                                  | (12) Distância não exibida         |

#### Tabela 3 – Interação com Lista, Modais e Mapa
| Condição de Entrada/Estado                 | Classes Válidas                                                     | Classes Inválidas                                      | Classes Inválidas                  |
| ------------------------------------------ | ------------------------------------------------------------------- | ------------------------------------------------------ | ---------------------------------- |
| Menu de ordenação                          | (1) Visível e funcional (alternância entre Proximidade e Alfabética)| (2) Menu ausente                                       | (3) Menu presente mas sem efeito   |
| Modal de detalhes da UBS                   | (4) Nome, Endereço, Horário e Serviços visíveis no modal            | (5) Modal com informações incompletas                  | (6) Modal não abre                 |
| Destaque do marcador (pin) no mapa         | (7) UBS selecionada com pin destacado visualmente                   | (8) Destacado marcador errado                          | (9) Nenhum marcador é destacado    |
